<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arsip-Puskesmas Trenggalek</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded"
      rel="stylesheet"
    />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.6/css/dataTables.jqueryui.min.css"
    />
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <style>
      body {
        font-family: "Roboto", sans-serif;
      }
      .ripple {
        position: relative;
        overflow: hidden;
      }
      .ripple:after {
        content: "";
        position: absolute;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        opacity: 0;
        transition: all 0.6s;
      }
      .ripple:active:after {
        width: 200px;
        height: 200px;
        top: var(--y);
        left: var(--x);
        opacity: 1;
        transform: scale(1);
      }
      .opacity-0 {
        opacity: 0;
        transition: opacity 0.3s;
      }
      /* Transisi untuk sidebar agar lebih halus */
      .sidebar-transition {
        transition: transform 0.3s ease-in-out;
      }
    </style>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <!-- Wrapper untuk seluruh aplikasi -->
    <div id="app" class="flex h-screen overflow-hidden">
      <!-- Tombol Hamburger untuk Mobile -->
      <button
        id="menu-toggle"
        class="md:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-md shadow-lg"
      >
        <span class="material-symbols-rounded">menu</span>
      </button>

      <!-- Overlay untuk mobile saat sidebar terbuka -->
      <div
        id="sidebar-overlay"
        class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"
      ></div>

      <!-- Sidebar -->
      <aside
        id="sidebar"
        class="sidebar-transition fixed md:relative md:translate-x-0 -translate-x-full w-72 bg-white shadow-xl p-6 flex flex-col border-r h-full z-40"
      >
        <h1 class="text-2xl font-bold mb-10 text-gray-800">Manajemen Surat</h1>
        <nav class="flex flex-col gap-2">
          <a
            data-page="dashboard"
            class="menu-item ripple flex items-center gap-4 py-3 px-4 rounded-xl hover:bg-gray-200 cursor-pointer"
          >
            <span class="material-symbols-rounded">dashboard</span>Dashboard
          </a>
          <a
            data-page="suratmasuk"
            class="menu-item ripple flex items-center gap-4 py-3 px-4 rounded-xl hover:bg-gray-200 cursor-pointer"
          >
            <span class="material-symbols-rounded">inbox</span>Surat Masuk
          </a>
          <a
            data-page="suratkeluar"
            class="menu-item ripple flex items-center gap-4 py-3 px-4 rounded-xl hover:bg-gray-200 cursor-pointer"
          >
            <span class="material-symbols-rounded">outbox</span>Surat Keluar
          </a>
          <a
            data-page="settings"
            class="menu-item ripple flex items-center gap-4 py-3 px-4 rounded-xl hover:bg-gray-200 cursor-pointer"
          >
            <span class="material-symbols-rounded">settings</span>Pengaturan
          </a>
        </nav>
      </aside>

      <!-- Content Area -->
      <main
        id="content"
        class="flex-1 pt-16 md:pt-0 p-4 md:p-8 overflow-auto bg-gray-100"
      >
        <!-- Konten akan dimuat di sini -->
      </main>
    </div>

    <script src="js/dashboard.js"></script>
    <script src="js/suratmasuk.js"></script>
    <script>
      const menuItems = document.querySelectorAll(".menu-item");
      const content = document.getElementById("content");
      const menuToggle = document.getElementById("menu-toggle");
      const sidebar = document.getElementById("sidebar");
      const sidebarOverlay = document.getElementById("sidebar-overlay");

      // Fungsi untuk toggle sidebar di mobile
      function toggleSidebar() {
        sidebar.classList.toggle("-translate-x-full");
        sidebarOverlay.classList.toggle("hidden");
      }

      // Event listener untuk tombol hamburger
      menuToggle.addEventListener("click", toggleSidebar);

      // Event listener untuk overlay (klik di luar sidebar untuk menutup)
      sidebarOverlay.addEventListener("click", toggleSidebar);

      // Event listener untuk item menu (menutup sidebar setelah navigasi di mobile)
      menuItems.forEach((item) => {
        item.addEventListener("click", () => {
          // Cek apakah layar adalah mobile (lebar < 768px)
          if (window.innerWidth < 768) {
            toggleSidebar();
          }
        });
      });

      document.addEventListener("click", (e) => {
        if (e.target.classList.contains("ripple")) {
          let rect = e.target.getBoundingClientRect();
          e.target.style.setProperty("--x", e.clientX - rect.left + "px");
          e.target.style.setProperty("--y", e.clientY - rect.top + "px");
        }
      });

      function setActiveMenu(el) {
        menuItems.forEach((i) =>
          i.classList.remove("bg-gray-800", "text-white")
        );
        el.classList.add("bg-gray-800", "text-white");
      }

      function loadPage(page) {
        fetch(`pages/${page}.html`)
          .then((res) => res.text())
          .then((html) => {
            content.classList.add("opacity-0");
            setTimeout(() => {
              content.innerHTML = html;
              content.classList.remove("opacity-0");

              if (page === "dashboard") {
                initDashboard();
              }
              if (page === "suratmasuk") {
                initSuratMasukPage();
              }
            }, 200);
          })
          .catch((error) => {
            console.error("Error loading page:", error);
            content.innerHTML = `<div class="p-6 bg-red-100 text-red-700 rounded-lg">Error loading page: ${page}</div>`;
          });
      }

      menuItems.forEach((btn) => {
        btn.addEventListener("click", () => {
          const page = btn.getAttribute("data-page");
          loadPage(page);
          setActiveMenu(btn);
        });
      });

      document.addEventListener("DOMContentLoaded", function () {
        initDashboard();
      });

      // Muat halaman pertama kali
      loadPage("dashboard");
      setActiveMenu(menuItems[0]);
    </script>
  </body>
</html>
